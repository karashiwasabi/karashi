CREATE TABLE IF NOT EXISTS unifiedrecords (
  slipdate        TEXT    NOT NULL,
  partnercode     TEXT    NOT NULL,
  receiptnumber   TEXT    NOT NULL,
  linenumber      TEXT    NOT NULL,
  flag            INTEGER NOT NULL,
  jancode         TEXT,
  yjcode          TEXT,
  productname     TEXT,
  packaging       TEXT,
  datqty          INTEGER,
  janquantity     INTEGER,
  janunitname     TEXT,
  janunitcode     TEXT,
  yjquantity      REAL,
  yjunitname      TEXT,
  unitprice       REAL,
  subtotalamount  REAL,
  taxamount       REAL,
  taxrate         REAL,
  expirydate      TEXT,
  lotnumber       TEXT,

  CONSTRAINT uq_unifiedrecords
    UNIQUE(partnercode, slipdate, receiptnumber, linenumber, flag)
);



CREATE TABLE IF NOT EXISTS jcshms (
JC000 TEXT,
JC001 TEXT,
JC002 TEXT,
JC003 TEXT,
JC004 TEXT,
JC005 TEXT,
JC006 TEXT,
JC007 TEXT,
JC008 TEXT,
JC009 TEXT,
JC010 TEXT,
JC011 TEXT,
JC012 TEXT,
JC013 TEXT,
JC014 TEXT,
JC015 TEXT,
JC016 TEXT,
JC017 TEXT,
JC018 TEXT,
JC019 TEXT,
JC020 TEXT,
JC021 TEXT,
JC022 TEXT,
JC023 TEXT,
JC024 TEXT,
JC025 TEXT,
JC026 TEXT,
JC027 TEXT,
JC028 TEXT,
JC029 TEXT,
JC030 TEXT,
JC031 TEXT,
JC032 TEXT,
JC033 TEXT,
JC034 TEXT,
JC035 TEXT,
JC036 TEXT,
JC037 TEXT,
JC038 TEXT,
JC039 TEXT,
JC040 TEXT,
JC041 TEXT,
JC042 TEXT,
JC043 TEXT,
JC044 TEXT,
JC045 TEXT,
JC046 TEXT,
JC047 TEXT,
JC048 TEXT,
JC049 TEXT,
JC050 TEXT,
JC051 TEXT,
JC052 TEXT,
JC053 TEXT,
JC054 TEXT,
JC055 TEXT,
JC056 TEXT,
JC057 TEXT,
JC058 TEXT,
JC059 TEXT,
JC060 TEXT,
JC061 TEXT,
JC062 TEXT,
JC063 TEXT,
JC064 TEXT,
JC065 TEXT,
JC066 TEXT,
JC067 TEXT,
JC068 TEXT,
JC069 TEXT,
JC070 TEXT,
JC071 TEXT,
JC072 TEXT,
JC073 TEXT,
JC074 TEXT,
JC075 TEXT,
JC076 TEXT,
JC077 TEXT,
JC078 TEXT,
JC079 TEXT,
JC080 TEXT,
JC081 TEXT,
JC082 TEXT,
JC083 TEXT,
JC084 TEXT,
JC085 TEXT,
JC086 TEXT,
JC087 TEXT,
JC088 TEXT,
JC089 TEXT,
JC090 TEXT,
JC091 TEXT,
JC092 TEXT,
JC093 TEXT,
JC094 TEXT,
JC095 TEXT,
JC096 TEXT,
JC097 TEXT,
JC098 TEXT,
JC099 TEXT,
JC100 TEXT,
JC101 TEXT,
JC102 TEXT,
JC103 TEXT,
JC104 TEXT,
JC105 TEXT,
JC106 TEXT,
JC107 TEXT,
JC108 TEXT,
JC109 TEXT,
JC110 TEXT,
JC111 TEXT,
JC112 TEXT,
JC113 TEXT,
JC114 TEXT,
JC115 TEXT,
JC116 TEXT,
JC117 TEXT,
JC118 TEXT,
JC119 TEXT,
JC120 TEXT,
JC121 TEXT,
JC122 TEXT,
JC123 TEXT,
JC124 TEXT,
PRIMARY KEY(JC000)
);

CREATE TABLE IF NOT EXISTS jancode (
JA000 TEXT,
JA001 TEXT,
JA002 TEXT,
JA003 TEXT,
JA004 TEXT,
JA005 TEXT,
JA006 TEXT,
JA007 TEXT,
JA008 TEXT,
JA009 TEXT,
JA010 TEXT,
JA011 TEXT,
JA012 TEXT,
JA013 TEXT,
JA014 TEXT,
JA015 TEXT,
JA016 TEXT,
JA017 TEXT,
JA018 TEXT,
JA019 TEXT,
JA020 TEXT,
JA021 TEXT,
JA022 TEXT,
JA023 TEXT,
JA024 TEXT,
JA025 TEXT,
JA026 TEXT,
JA027 TEXT,
JA028 TEXT,
JA029 TEXT,
PRIMARY KEY(JA001)
);

CREATE TABLE IF NOT EXISTS ma0 (
MA000 TEXT,
MA001 TEXT,
MA002 TEXT,
MA003 TEXT,
MA004 TEXT,
MA005 TEXT,
MA006 TEXT,
MA007 TEXT,
MA008 TEXT,
MA009 TEXT,
MA010 TEXT,
MA011 TEXT,
MA012 TEXT,
MA013 TEXT,
MA014 TEXT,
MA015 TEXT,
MA016 TEXT,
MA017 TEXT,
MA018 TEXT,
MA019 TEXT,
MA020 TEXT,
MA021 TEXT,
MA022 TEXT,
MA023 TEXT,
MA024 TEXT,
MA025 TEXT,
MA026 TEXT,
MA027 TEXT,
MA028 TEXT,
MA029 TEXT,
MA030 TEXT,
MA031 TEXT,
MA032 TEXT,
MA033 TEXT,
MA034 TEXT,
MA035 TEXT,
MA036 TEXT,
MA037 TEXT,
MA038 TEXT,
MA039 TEXT,
MA040 TEXT,
MA041 TEXT,
MA042 TEXT,
MA043 TEXT,
MA044 TEXT,
MA045 TEXT,
MA046 TEXT,
MA047 TEXT,
MA048 TEXT,
MA049 TEXT,
MA050 TEXT,
MA051 TEXT,
MA052 TEXT,
MA053 TEXT,
MA054 TEXT,
MA055 TEXT,
MA056 TEXT,
MA057 TEXT,
MA058 TEXT,
MA059 TEXT,
MA060 TEXT,
MA061 TEXT,
MA062 TEXT,
MA063 TEXT,
MA064 TEXT,
MA065 TEXT,
MA066 TEXT,
MA067 TEXT,
MA068 TEXT,
MA069 TEXT,
MA070 TEXT,
MA071 TEXT,
MA072 TEXT,
MA073 TEXT,
MA074 TEXT,
MA075 TEXT,
MA076 TEXT,
MA077 TEXT,
MA078 TEXT,
MA079 TEXT,
MA080 TEXT,
MA081 TEXT,
MA082 TEXT,
MA083 TEXT,
MA084 TEXT,
MA085 TEXT,
MA086 TEXT,
MA087 TEXT,
MA088 TEXT,
MA089 TEXT,
MA090 TEXT,
MA091 TEXT,
MA092 TEXT,
MA093 TEXT,
MA094 TEXT,
MA095 TEXT,
MA096 TEXT,
MA097 TEXT,
MA098 TEXT,
MA099 TEXT,
MA100 TEXT,
MA101 TEXT,
MA102 TEXT,
MA103 TEXT,
MA104 TEXT,
MA105 TEXT,
MA106 TEXT,
MA107 TEXT,
MA108 TEXT,
MA109 TEXT,
MA110 TEXT,
MA111 TEXT,
MA112 TEXT,
MA113 TEXT,
MA114 TEXT,
MA115 TEXT,
MA116 TEXT,
MA117 TEXT,
MA118 TEXT,
MA119 TEXT,
MA120 TEXT,
MA121 TEXT,
MA122 TEXT,
MA123 TEXT,
MA124 TEXT,
MA125 TEXT,
MA126 TEXT,
MA127 TEXT,
MA128 TEXT,
MA129 TEXT,
MA130 TEXT,
MA131 TEXT,
MA132 TEXT,
MA133 TEXT,
MA134 TEXT,
MA135 TEXT,
MA136 TEXT,
MA137 TEXT,
MA138 TEXT,
MA139 TEXT,
MA140 TEXT,
MA141 TEXT,
MA142 TEXT,
MA143 TEXT,
MA144 TEXT,
MA145 TEXT,
MA146 TEXT,
MA147 TEXT,
MA148 TEXT,
MA149 TEXT,
MA150 TEXT,
MA151 TEXT,
MA152 TEXT,
MA153 TEXT,
MA154 TEXT,
PRIMARY KEY(MA000)
);

-- ma2 テーブル（軽量版9項目＋内部ID）
CREATE TABLE IF NOT EXISTS ma2 (
  id             INTEGER PRIMARY KEY AUTOINCREMENT,
  MA000     TEXT    UNIQUE NOT NULL,
  MA009     TEXT    UNIQUE,
  MA018     TEXT,
  MA037     TEXT,
  MA039     TEXT,
  MA044     TEXT,
  MA131     TEXT,
  MA132     TEXT,
  MA133     TEXT,
  MA134     TEXT
);

-- 挿入後にYJコードを自動採番するトリガー
CREATE TRIGGER IF NOT EXISTS trg_ma2_assign_yj
AFTER INSERT ON ma2
FOR EACH ROW
BEGIN
  UPDATE ma2
     SET MA009 = 'MA' || printf('%010d', NEW.id)
   WHERE id = NEW.id;
END;

